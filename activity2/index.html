<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"  type="text/javascript"></script>

    <title>Activity 2: jQuery + AJAX request + DOM manipulation</title>
  </head>
  <body>
    <h1>Activity 2: jQuery + AJAX request + DOM manipulation</h1>
    <p>With JQuery load de data on the sibling file employees.json and build a table showing the data:</p>
    <div id="table-container"></div>
    <script>
      //npm install http-server -g
      //http-serve

      $(document).ready(function() {

        $.ajax('employees.json').then(
          (data)=>{
            try {

              $('#table-container').append('<table class="table"><thead></thead><tbody></tbody></table>');
              data.forEach((item, i ) => {
                //Creamos la cabecera y la primera linea
                if (i===0) {
                  $('#table-container table thead').append('<tr></tr>');
                } 
                //Creamos el cuerpo del cuerpo y la fila
                $('#table-container table tbody').append('<tr></tr>');

                for (let key in item) {
                  //Recorremos la columnas para crear
                  if (i===0) {
                    $('#table-container table thead tr:eq('+i+')').append('<th>'+ key +'</th>')
                  }
                  $('#table-container table tbody tr:eq('+i+')').append('<td>'+ item[key] +'</td>')
                }
              });
            } catch (error) {
              alert(error)
            }
          }
        ).fail(
          (e)=>{
            alert("Error en la carga del Json")
          }
        )
      })



    </script>
   
   
  </body>
</html>
